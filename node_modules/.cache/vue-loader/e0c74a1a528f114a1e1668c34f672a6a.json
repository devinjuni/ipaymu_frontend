{"remainingRequest":"C:\\xampp\\htdocs\\ipaymu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\ipaymu\\src\\views\\Payment.vue?vue&type=style&index=0&id=322f15bc&scoped=true&lang=css&","dependencies":[{"path":"C:\\xampp\\htdocs\\ipaymu\\src\\views\\Payment.vue","mtime":1631764200789},{"path":"C:\\xampp\\htdocs\\ipaymu\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\ipaymu\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\ipaymu\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\ipaymu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\ipaymu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQpidXR0b24gew0KICBjb2xvcjogd2hpdGU7DQp9DQo="},{"version":3,"sources":["Payment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyiBA;AACA;AACA","file":"Payment.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <b-container>\r\n    <v-card>\r\n      <stepper :options=\"stepperOptions\">\r\n        <div slot=\"step-1\">\r\n          <h3>Keranjang Item</h3>\r\n          <v-app style=\"margin-bottom: 15px\">\r\n            <v-card>\r\n              <v-card-title>\r\n                <b-button\r\n                  variant=\"success\"\r\n                  v-on:click=\"add_data\"\r\n                  v-b-tooltip.hover.top\r\n                  title=\"Add Data\"\r\n                  ><b-icon-plus></b-icon-plus> add data</b-button\r\n                >\r\n\r\n                <v-spacer></v-spacer>\r\n                <v-text-field\r\n                  v-model=\"search\"\r\n                  append-icon=\"mdi-magnify\"\r\n                  label=\"Search\"\r\n                  single-line\r\n                  hide-details\r\n                ></v-text-field>\r\n              </v-card-title>\r\n              <v-data-table\r\n                :headers=\"headers\"\r\n                :items=\"data_item\"\r\n                :search=\"search\"\r\n                :footer-props=\"{\r\n                  'items-per-page-options': [5, 10, 25, -1],\r\n                }\"\r\n                :items-per-page=\"5\"\r\n              >\r\n                <template v-slot:[`item.action`]=\"{ item }\">\r\n                  <b-button\r\n                    size=\"sm\"\r\n                    variant=\"danger\"\r\n                    v-on:click=\"delete_data(item.index)\"\r\n                    v-b-tooltip.hover.left\r\n                    :title=\"`Delete Item ${item.name}`\"\r\n                    ><b-icon-trash></b-icon-trash\r\n                  ></b-button>\r\n                </template>\r\n              </v-data-table>\r\n            </v-card>\r\n          </v-app>\r\n        </div>\r\n\r\n        <div slot=\"step-2\">\r\n          <h3>Payment</h3>\r\n\r\n          <b-row>\r\n            <b-col\r\n              ><b-form-input\r\n                placeholder=\"Name\"\r\n                v-model=\"form.nama\"\r\n                :state=\"validation.nama\"\r\n              ></b-form-input\r\n            ></b-col>\r\n          </b-row>\r\n          <b-row>\r\n            <b-col\r\n              ><b-form-input\r\n                placeholder=\"Email\"\r\n                v-model=\"form.email\"\r\n                :state=\"validation.email\"\r\n              ></b-form-input\r\n            ></b-col>\r\n            <b-col\r\n              ><b-form-input\r\n                placeholder=\"Phone\"\r\n                v-model=\"form.phone\"\r\n                @keypress=\"onlyNumber\"\r\n                :state=\"validation.phone\"\r\n              ></b-form-input\r\n            ></b-col>\r\n          </b-row>\r\n          <b-row>\r\n            <b-col\r\n              ><b-form-select\r\n                v-model=\"form.selected_method\"\r\n                :options=\"options_method\"\r\n                class=\"mb-3\"\r\n              >\r\n                <template #first>\r\n                  <b-form-select-option :value=\"null\" disabled\r\n                    >Please select Method</b-form-select-option\r\n                  >\r\n                </template>\r\n              </b-form-select>\r\n            </b-col>\r\n            <b-col\r\n              ><b-form-input\r\n                placeholder=\"Amount\"\r\n                v-model=\"grand_total\"\r\n                disabled\r\n              ></b-form-input\r\n            ></b-col>\r\n          </b-row>\r\n\r\n          <b-row>\r\n            <b-col>\r\n              <b-form-input\r\n                placeholder=\"Pickup Address\"\r\n                v-model=\"form.address\"\r\n                :state=\"validation.address\"\r\n              ></b-form-input>\r\n            </b-col>\r\n            <b-col>\r\n              <b-form-input\r\n                placeholder=\"Pickup Area\"\r\n                v-model=\"form.area\"\r\n                :state=\"validation.area\"\r\n              ></b-form-input>\r\n            </b-col>\r\n          </b-row>\r\n\r\n          <b-row>\r\n            <b-col\r\n              ><b-form-textarea\r\n                id=\"textarea\"\r\n                placeholder=\"Comment\"\r\n                rows=\"3\"\r\n                max-rows=\"10\"\r\n                v-model=\"form.comment\"\r\n              ></b-form-textarea\r\n            ></b-col>\r\n          </b-row>\r\n\r\n          <b-row class=\"mt-3\">\r\n            <b-col\r\n              ><b-button\r\n                variant=\"primary\"\r\n                :disabled=\"submit_disabled\"\r\n                align=\"center\"\r\n                v-b-tooltip.hover.left\r\n                title=\"Submit Payment\"\r\n                v-on:click=\"proses_payment\"\r\n                ><b-icon-credit-card2-back></b-icon-credit-card2-back>\r\n                Proses</b-button\r\n              ></b-col\r\n            >\r\n          </b-row>\r\n        </div>\r\n      </stepper>\r\n    </v-card>\r\n\r\n    <!-- Modal -->\r\n\r\n    <b-modal\r\n      ref=\"modal\"\r\n      id=\"modal-lg\"\r\n      size=\"lg\"\r\n      title=\"Add Item List\"\r\n      :ok-disabled=\"disabled_submit\"\r\n      v-on:ok=\"add_data_item\"\r\n    >\r\n      <b-row>\r\n        <b-col cols=\"2\"> Nama Item </b-col>\r\n        <b-col cols=\"1\" md=\"auto\"> : </b-col>\r\n        <b-col\r\n          ><b-form-select\r\n            v-model=\"list_item\"\r\n            :options=\"options_item\"\r\n            class=\"mb-3\"\r\n          >\r\n            <template #first>\r\n              <b-form-select-option :value=\"null\" disabled\r\n                >Please select Item</b-form-select-option\r\n              >\r\n            </template>\r\n          </b-form-select></b-col\r\n        >\r\n        <b-col cols=\"2\"> Qty </b-col>\r\n        <b-col cols=\"1\" md=\"auto\"> : </b-col>\r\n        <b-col\r\n          ><b-form-input\r\n            type=\"number\"\r\n            v-model=\"qty\"\r\n            :disabled=\"disabled_qty\"\r\n          ></b-form-input\r\n        ></b-col>\r\n      </b-row>\r\n      <b-row>\r\n        <b-col cols=\"2\"> Price </b-col>\r\n        <b-col cols=\"1\" md=\"auto\"> : </b-col>\r\n        <b-col\r\n          ><b-form-input disabled v-model=\"modal.price_full\"></b-form-input\r\n        ></b-col>\r\n        <b-col cols=\"2\"> Grand Total </b-col>\r\n        <b-col cols=\"1\" md=\"auto\"> : </b-col>\r\n        <b-col\r\n          ><b-form-input disabled v-model=\"modal.total_full\"></b-form-input\r\n        ></b-col>\r\n      </b-row>\r\n    </b-modal>\r\n    <!-- end modal -->\r\n  </b-container>\r\n</template>\r\n<script>\r\nimport Stepper from \"vuejs-stepper\";\r\nimport Swal from \"sweetalert2\";\r\nexport default {\r\n  components: { Stepper },\r\n  data: function () {\r\n    return {\r\n      e1: 1,\r\n      text_hidden: true,\r\n      disabled_qty: true,\r\n      url: \"http://localhost:8080/api\",\r\n      disabled_submit: true,\r\n      submit_disabled: true,\r\n      modal: {\r\n        price: 0,\r\n        price_full: \"0\",\r\n        total: 0,\r\n        total_full: \"0\",\r\n      },\r\n      list_item: null,\r\n      qty: 1,\r\n      form: {\r\n        nama: \"\",\r\n        phone: \"\",\r\n        email: \"\",\r\n        address: \"\",\r\n        area: \"\",\r\n        amount: \"\",\r\n        comment: \"\",\r\n        selected_method: null,\r\n        selected_channel: null,\r\n      },\r\n      validation: {\r\n        nama: null,\r\n        phone: null,\r\n        email: null,\r\n        address: null,\r\n        area: null,\r\n      },\r\n      options_method: [\r\n        { text: \"Virtual Account\", value: \"va\" },\r\n        { text: \"Bank Transfer\", value: \"banktransfer\" },\r\n        { text: \"Convenience Store\", value: \"store\" },\r\n        { text: \"COD\", value: \"cod\" },\r\n        { text: \"Pay Later\", value: \"payleter\" },\r\n        { text: \"QRIS \", value: \"qris\" },\r\n      ],\r\n      options_chanel: [\r\n        { text: \"Bag\", value: \"bag\" },\r\n        { text: \"BCA\", value: \"bca\" },\r\n        { text: \"BNI\", value: \"bni\" },\r\n        { text: \"Cimb Niaga\", value: \"cimb\" },\r\n        { text: \"Mandiri \", value: \"mandiri\" },\r\n        { text: \"Muamalat\", value: \"bmi\" },\r\n        { text: \"BRI\", value: \"bri\" },\r\n      ],\r\n      options_item: [\r\n        { text: \"Celana\", value: \"Celana&&100000\" },\r\n        { text: \"Tas\", value: \"Tas&&150000\" },\r\n        { text: \"Baju\", value: \"Baju&&75000\" },\r\n        { text: \"Kacamata\", value: \"Kacamata&&100000\" },\r\n        { text: \"Sepatu \", value: \"Sepatu&&180000\" },\r\n        { text: \"Ikat Pinggang\", value: \"Ikat Pinggang&&125000\" },\r\n        { text: \"Jam Tangan\", value: \"Jam Tangan&&35000\" },\r\n      ],\r\n      stepperOptions: {\r\n        headers: [{ title: \"Items\" }, { title: \"Payment\" }],\r\n        prevText: \"Previous\",\r\n        nextText: \"Next\",\r\n      },\r\n\r\n      search: \"\",\r\n      headers: [\r\n        {\r\n          text: \"Item Name\",\r\n          align: \"start\",\r\n          sortable: false,\r\n          value: \"name\",\r\n        },\r\n        { text: \"Qty\", value: \"qty\" },\r\n        { text: \"Price\", value: \"price_full\" },\r\n        { text: \"Total\", value: \"total_full\" },\r\n        { text: \"Action\", value: \"action\" },\r\n      ],\r\n      desserts: [\r\n        {\r\n          name: \"Baju\",\r\n          qty: 1,\r\n          price: 20000,\r\n          price_full: this.format_uang(20000),\r\n          total: 20000,\r\n          total_full: this.format_uang(20000),\r\n        },\r\n        {\r\n          name: \"Celana\",\r\n          qty: 2,\r\n          price: 50000,\r\n          price_full: this.format_uang(50000),\r\n          total: 100000,\r\n          total_full: this.format_uang(100000),\r\n        },\r\n        {\r\n          name: \"Jam Tangan\",\r\n          qty: 2,\r\n          price: 25000,\r\n          price_full: this.format_uang(25000),\r\n          total: 50000,\r\n          total_full: this.format_uang(50000),\r\n        },\r\n      ],\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    form: {\r\n      handler() {\r\n        this.cek_validation();\r\n      },\r\n      deep: true,\r\n    },\r\n\r\n    qty: function () {\r\n      this.qty < 0 || this.qty === \"\" || this.qty === 0\r\n        ? (this.qty = 1)\r\n        : \"nothing\";\r\n      this.qty === \"0\"\r\n        ? (this.disabled_submit = true)\r\n        : (this.disabled_submit = false);\r\n      var total = this.modal.price * this.qty;\r\n      this.modal.total = total;\r\n      this.modal.total_full = this.format_uang(total);\r\n    },\r\n\r\n    list_item: function () {\r\n      if (this.list_item !== null) {\r\n        this.disabled_qty = false;\r\n        this.disabled_submit = false;\r\n        var item = this.list_item;\r\n        var split_item = item.split(\"&&\");\r\n        var harga = split_item[1];\r\n        this.modal.price = harga;\r\n        this.modal.price_full = this.format_uang(harga);\r\n        this.modal.total = harga;\r\n        this.modal.total_full = this.format_uang(harga);\r\n        this.cek_available(split_item[0])\r\n          .then(() => {})\r\n          .catch(() => {\r\n            this.alert(\r\n              \"danger\",\r\n              \"Data Duplicate\",\r\n              `${split_item[0]} Sudah Ada..!!`\r\n            );\r\n            this.reset_form();\r\n          });\r\n      }\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    grand_total: function () {\r\n      var total = 0;\r\n      this.desserts.map((value) => {\r\n        total += value.total;\r\n      });\r\n\r\n      return this.format_uang(total);\r\n    },\r\n\r\n    data_item: function () {\r\n      return this.desserts\r\n        .slice()\r\n        .reverse()\r\n        .map((value, index) => ({\r\n          ...value,\r\n          index: index,\r\n          no: index + 1,\r\n        }));\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    onlyNumber: function ($event) {\r\n      //console.log($event.keyCode); //keyCodes value\r\n      let keyCode = $event.keyCode ? $event.keyCode : $event.which;\r\n      if ((keyCode < 48 || keyCode > 57) && keyCode !== 46) {\r\n        // 46 is dot\r\n        $event.preventDefault();\r\n      }\r\n    },\r\n\r\n    proses_payment: function () {\r\n      let item = [];\r\n      this.desserts.map((value) => {\r\n        item.push(value.name.toString());\r\n      });\r\n      this.axios\r\n        .post(this.url + \"/redirect_payment\", {\r\n          item: item,\r\n          nama: this.form.nama,\r\n          phone: this.form.phone,\r\n          email: this.form.email,\r\n          address: this.form.address,\r\n          area: this.form.area,\r\n          comment: this.form.comment,\r\n          method: this.form.selected_method,\r\n        })\r\n        .then((respon) => {\r\n          if (respon.data.Status === 200) {\r\n            this.alert(\"success\", \"Payment Success\", \"Payment Success Process\");\r\n            this.reset_form_personal();\r\n            console.log(respon.data);\r\n          } else if (respon.data.Status === 400) {\r\n            this.alert(\"danger\", \"Payment Error\", \"Payment Error to Process\");\r\n          } else {\r\n            this.alert(\r\n              \"danger\",\r\n              \"Payment authorized\",\r\n              \"Payment Authorized Process\"\r\n            );\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.alert_koneksi();\r\n        });\r\n    },\r\n\r\n    cek_validation: function () {\r\n      this.form.nama !== \"\"\r\n        ? (this.validation.nama = true)\r\n        : (this.validation.nama = false);\r\n      this.form.email !== \"\"\r\n        ? (this.validation.email = true)\r\n        : (this.validation.email = false);\r\n      this.validEmail(this.form.email)\r\n        ? (this.validation.email = true)\r\n        : (this.validation.email = false);\r\n      this.form.phone !== \"\"\r\n        ? (this.validation.phone = true)\r\n        : (this.validation.phone = false);\r\n      this.form.address !== \"\"\r\n        ? (this.validation.address = true)\r\n        : (this.validation.address = false);\r\n      this.form.area !== \"\"\r\n        ? (this.validation.area = true)\r\n        : (this.validation.area = false);\r\n\r\n      this.form.nama !== \"\" &&\r\n      this.form.email !== \"\" &&\r\n      this.form.phone !== \"\" &&\r\n      this.form.selected_method !== null &&\r\n      this.form.address !== \"\" &&\r\n      this.form.area !== \"\" &&\r\n      this.validEmail(this.form.email)\r\n        ? (this.submit_disabled = false)\r\n        : (this.submit_disabled = true);\r\n    },\r\n\r\n    delete_data: function (index) {\r\n      console.log(index);\r\n      this.desserts.splice(index, 1);\r\n    },\r\n\r\n    format_uang: function (numb) {\r\n      const format = numb.toString().split(\"\").reverse().join(\"\");\r\n      const convert = format.match(/\\d{1,3}/g);\r\n      const rupiah = \"Rp \" + convert.join(\".\").split(\"\").reverse().join(\"\");\r\n      return rupiah;\r\n    },\r\n\r\n    add_data_item: function () {\r\n      var item_list = this.list_item;\r\n      var split_item = item_list.split(\"&&\");\r\n      var item_name = split_item[0];\r\n      let item = {\r\n        name: item_name,\r\n        qty: this.qty,\r\n        price: this.modal.price,\r\n        price_full: this.modal.price_full,\r\n        total: this.modal.total,\r\n        total_full: this.modal.total_full,\r\n      };\r\n\r\n      this.desserts.push(item);\r\n      this.reset_form();\r\n    },\r\n\r\n    add_data: function () {\r\n      this.show_modal();\r\n    },\r\n\r\n    reset_form: function () {\r\n      this.qty = 1;\r\n      this.disabled_qty = true;\r\n      this.list_item = null;\r\n      this.modal.price = 0;\r\n      this.modal.price_full = \"0\";\r\n      this.modal.total = 0;\r\n      this.modal.total_full = \"0\";\r\n      this.disabled_submit = true;\r\n    },\r\n\r\n    reset_form_personal: function () {\r\n      this.form.nama = \"\";\r\n      this.form.email = \"\";\r\n      this.form.phone = \"\";\r\n      this.form.selected_method = null;\r\n      this.form.address = \"\";\r\n      this.form.area = \"\";\r\n    },\r\n\r\n    cek_available: function (nama_item) {\r\n      return new Promise((resolve, reject) => {\r\n        this.desserts.map((value) => {\r\n          if (value.name === nama_item) {\r\n            reject();\r\n          }\r\n        });\r\n        resolve();\r\n      });\r\n    },\r\n\r\n    validEmail: function (email) {\r\n      var re =\r\n        /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n      return re.test(email);\r\n    },\r\n\r\n    alert: function (variant, title, body) {\r\n      this.$bvToast.toast(body, {\r\n        title: title,\r\n        toaster: \"b-toaster-top-center\",\r\n        variant: variant,\r\n        solid: true,\r\n      });\r\n    },\r\n\r\n    show_modal: function () {\r\n      this.$refs.modal.show();\r\n    },\r\n\r\n    alert_koneksi: function () {\r\n      Swal.fire({\r\n        icon: \"error Connection\",\r\n        title: \"Oops...\",\r\n        text: \"Check Your Connection..!\",\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nbutton {\r\n  color: white;\r\n}\r\n</style>"]}]}