{"remainingRequest":"C:\\xampp\\htdocs\\ipaymu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\ipaymu\\src\\views\\User.vue?vue&type=style&index=0&id=e0b47cf6&scoped=true&lang=css&","dependencies":[{"path":"C:\\xampp\\htdocs\\ipaymu\\src\\views\\User.vue","mtime":1631703601685},{"path":"C:\\xampp\\htdocs\\ipaymu\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\ipaymu\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\ipaymu\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\ipaymu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\xampp\\htdocs\\ipaymu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQpidXR0b24gew0KICBjb2xvcjogd2hpdGU7DQp9DQo="},{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgcA;AACA;AACA","file":"User.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <b-container>\r\n    <!-- Table User -->\r\n    <v-app>\r\n      <v-card>\r\n        <v-card-title>\r\n          <b-button\r\n            v-b-tooltip.hover.top\r\n            title=\"Add Data\"\r\n            variant=\"success\"\r\n            v-on:click=\"add_data\"\r\n            size=\"sm\"\r\n            ><b-icon-plus></b-icon-plus> Add Data</b-button\r\n          >\r\n          <v-spacer></v-spacer>\r\n          <v-text-field\r\n            v-model=\"search\"\r\n            append-icon=\"mdi-magnify\"\r\n            label=\"Search\"\r\n            single-line\r\n            hide-details\r\n          ></v-text-field>\r\n        </v-card-title>\r\n        <v-data-table\r\n          :headers=\"headers\"\r\n          :items=\"data_user\"\r\n          :search=\"search\"\r\n          :options.sync=\"options\"\r\n          :server-items-length=\"totalDesserts\"\r\n          :loading=\"loading\"\r\n          class=\"elevation-1\"\r\n          :footer-props=\"{\r\n            'items-per-page-options': [10, 25, 200, -1],\r\n          }\"\r\n          :items-per-page=\"10\"\r\n        >\r\n          <template v-slot:[`item.tipe_tanggal`]=\"{ item }\">\r\n            <v-chip\r\n              :color=\"`${item.color_tanggal} lighten-4`\"\r\n              class=\"ml-0 mr-2 black--text\"\r\n              label\r\n              small\r\n            >\r\n              {{ item.tipe_tanggal }}\r\n            </v-chip>\r\n          </template>\r\n          <template v-slot:[`item.tipe_minggu`]=\"{ item }\">\r\n            <v-chip\r\n              :color=\"`${item.color_minggu} lighten-4`\"\r\n              class=\"ml-0 mr-2 black--text\"\r\n              label\r\n              small\r\n            >\r\n              {{ item.tipe_minggu }}\r\n            </v-chip>\r\n          </template>\r\n\r\n          <template v-slot:[`item.action`]=\"{ item }\">\r\n            <b-button\r\n              variant=\"primary\"\r\n              v-b-tooltip.hover.left\r\n              :title=\"`Update Data ${item.nama}`\"\r\n              class=\"mr-1\"\r\n              size=\"sm\"\r\n              v-on:click=\"show_update(item)\"\r\n              ><b-icon-pencil-fill></b-icon-pencil-fill\r\n            ></b-button>\r\n            <b-button\r\n              variant=\"danger\"\r\n              v-b-tooltip.hover.right\r\n              :title=\"`Delete Data ${item.nama}`\"\r\n              size=\"sm\"\r\n              v-on:click=\"confirm_delete(item.id_user, item.no, item.nama)\"\r\n              ><b-spinner small v-if=\"item.spinner\"></b-spinner\r\n              ><b-icon-trash-fill v-if=\"item.icon\"></b-icon-trash-fill\r\n            ></b-button>\r\n          </template>\r\n        </v-data-table>\r\n      </v-card>\r\n    </v-app>\r\n\r\n    <!--End Table User -->\r\n\r\n    <!-- modal data -->\r\n\r\n    <b-modal\r\n      ref=\"modal\"\r\n      id=\"modal-lg\"\r\n      size=\"lg\"\r\n      :title=\"title\"\r\n      v-on:shown=\"focus_input\"\r\n      :ok-disabled=\"submit_disabled\"\r\n      v-on:ok=\"tipe === 'add' ? save_data() : update_data()\"\r\n    >\r\n      <b-row>\r\n        <b-col cols=\"2\">User Key</b-col>\r\n        <b-col cols=\"1\" md=\"auto\">:</b-col>\r\n        <b-col\r\n          ><b-form-input v-model=\"form.user_key\" disabled></b-form-input\r\n        ></b-col>\r\n        <b-col cols=\"2\">Pekerjaan</b-col>\r\n        <b-col cols=\"1\" md=\"auto\">:</b-col>\r\n        <b-col\r\n          ><b-form-input\r\n            v-model=\"form.pekerjaan\"\r\n            placeholder=\"Input Pekerjaan\"\r\n            :state=\"validation.pekerjaan\"\r\n          ></b-form-input\r\n        ></b-col>\r\n      </b-row>\r\n      <b-row>\r\n        <b-col cols=\"2\">Nama</b-col>\r\n        <b-col cols=\"1\" md=\"auto\">:</b-col>\r\n        <b-col\r\n          ><b-form-input\r\n            v-model=\"form.nama\"\r\n            ref=\"nama\"\r\n            placeholder=\"Input Nama\"\r\n            :state=\"validation.nama\"\r\n          ></b-form-input\r\n        ></b-col>\r\n        <b-col cols=\"2\">Tgl Lahir</b-col>\r\n        <b-col cols=\"1\" md=\"auto\">:</b-col>\r\n        <b-col\r\n          ><date-picker\r\n            v-model=\"form.tgl_lahir\"\r\n            placeholder=\"Input Tgl Lahir\"\r\n            :state=\"validation.tgl_lahir\"\r\n            valueType=\"format\"\r\n          ></date-picker\r\n        ></b-col>\r\n      </b-row>\r\n    </b-modal>\r\n\r\n    <!-- end modal -->\r\n  </b-container>\r\n</template>\r\n\r\n<script>\r\nimport Swal from \"sweetalert2\";\r\nimport DatePicker from \"vue2-datepicker\";\r\nimport \"vue2-datepicker/index.css\";\r\nexport default {\r\n  components: { DatePicker },\r\n  data: function () {\r\n    return {\r\n      title: \"\",\r\n      search: \"\",\r\n      tipe: \"add\",\r\n      submit_disabled: true,\r\n      url: \"http://localhost:8080/api\",\r\n      totalDesserts: 0,\r\n      loading: true,\r\n      options: {},\r\n      form: {\r\n        nama: \"\",\r\n        pekerjaan: \"\",\r\n        tgl_lahir: \"\",\r\n        user_key: \"Automatic\",\r\n        id_user: \"\",\r\n      },\r\n      validation: {\r\n        nama: null,\r\n        pekerjaan: null,\r\n        tgl_lahir: null,\r\n      },\r\n      headers: [\r\n        { text: \"No\", value: \"no\", align: \"start\", sortable: false },\r\n        { text: \"Nama Pekerjaan\", value: \"nama\" },\r\n        { text: \"Pekerjaan\", value: \"pekerjaan\" },\r\n        { text: \"Tanggal Lahir\", value: \"tgl_lahir_full\" },\r\n        { text: \"Tipe Tanggal\", value: \"tipe_tanggal\" },\r\n        { text: \"Tipe Minggu\", value: \"tipe_minggu\" },\r\n        { text: \"Action\", value: \"action\" },\r\n      ],\r\n      result_data: [],\r\n    };\r\n  },\r\n\r\n  watch: {\r\n    options: {\r\n      handler() {\r\n        this.show_page(this.search);\r\n      },\r\n      deep: true,\r\n    },\r\n\r\n    search: function () {\r\n      this.show_page(this.search);\r\n    },\r\n\r\n    form: {\r\n      handler() {\r\n        this.cek_validation();\r\n      },\r\n      deep: true,\r\n    },\r\n  },\r\n\r\n  mounted: function () {\r\n    this.show_page();\r\n  },\r\n\r\n  computed: {\r\n    data_user: function () {\r\n      return this.result_data.map((value, index) => ({\r\n        ...value,\r\n        spinner: false,\r\n        icon: true,\r\n        color_tanggal: value.tipe_tanggal === \"Genap\" ? \"teal\" : \"red\",\r\n        color_minggu: value.tipe_minggu === \"Genap\" ? \"teal\" : \"red\",\r\n        no: index + 1,\r\n      }));\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    add_data: function () {\r\n      this.reset_form();\r\n      this.tipe = \"add\";\r\n      this.title = \"Tambah Data User\";\r\n      this.show_modal();\r\n    },\r\n\r\n    show_modal: function () {\r\n      this.$refs.modal.show();\r\n    },\r\n\r\n    show_page: function (search) {\r\n      this.loading = true;\r\n      this.get_api_data_user(search).then((data) => {\r\n        this.result_data = data.items;\r\n        this.totalDesserts = data.total;\r\n        this.loading = false;\r\n      });\r\n    },\r\n\r\n    get_api_data_user: function (search) {\r\n      return new Promise((resolve) => {\r\n        const { sortBy, sortDesc, page, itemsPerPage } = this.options;\r\n        this.axios\r\n          .post(this.url + \"/get_all_data_user\", {\r\n            search: search,\r\n          })\r\n          .then((respon) => {\r\n            let items = respon.data.data;\r\n            const total = items.length;\r\n\r\n            if (sortBy.length === 1 && sortDesc.length === 1) {\r\n              items = items.sort((a, b) => {\r\n                const sortA = a[sortBy[0]];\r\n                const sortB = b[sortBy[0]];\r\n\r\n                if (sortDesc[0]) {\r\n                  if (sortA < sortB) return 1;\r\n                  if (sortA > sortB) return -1;\r\n                  return 0;\r\n                } else {\r\n                  if (sortA < sortB) return -1;\r\n                  if (sortA > sortB) return 1;\r\n                  return 0;\r\n                }\r\n              });\r\n            }\r\n\r\n            if (itemsPerPage > 0) {\r\n              items = items.slice(\r\n                (page - 1) * itemsPerPage,\r\n                page * itemsPerPage\r\n              );\r\n            }\r\n\r\n            setTimeout(() => {\r\n              resolve({\r\n                items,\r\n                total,\r\n              });\r\n            }, 1000);\r\n          })\r\n          .catch(() => {\r\n            this.alert_koneksi();\r\n          });\r\n      }).catch(() => {\r\n        this.alert_koneksi();\r\n      });\r\n    },\r\n\r\n    confirm_delete: function (id, no, nama) {\r\n      this.data_user[no - 1].spinner = true;\r\n      this.data_user[no - 1].icon = false;\r\n      this.$confirm({\r\n        title: \"Delete Data\",\r\n        message: `Are you sure Delete Data ${nama}?`,\r\n        button: {\r\n          no: \"No\",\r\n          yes: \"Yes\",\r\n        },\r\n        callback: (confirm) => {\r\n          if (confirm) {\r\n            this.delete_data(id);\r\n          } else {\r\n            this.data_user[no - 1].spinner = false;\r\n            this.data_user[no - 1].icon = true;\r\n          }\r\n        },\r\n      });\r\n    },\r\n\r\n    delete_data: function (id) {\r\n      this.axios\r\n        .post(this.url + \"/delete_data_user\", {\r\n          id_user: id,\r\n        })\r\n        .then((respon) => {\r\n          if (respon.data.pesan === \"success\") {\r\n            this.alert(\r\n              respon.data.variant,\r\n              respon.data.title,\r\n              respon.data.body\r\n            );\r\n            this.show_page();\r\n          } else {\r\n            this.alert_database();\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.alert_koneksi();\r\n        });\r\n    },\r\n\r\n    show_update: function (item) {\r\n      this.tipe = \"update\";\r\n      this.title = \"Update Data \" + item.nama;\r\n      this.form.id_user = item.id_user;\r\n      this.form.user_key = item.user_key;\r\n      this.form.nama = item.nama;\r\n      this.form.pekerjaan = item.pekerjaan;\r\n      this.form.tgl_lahir = item.tgl_lahir;\r\n      this.show_modal();\r\n    },\r\n\r\n    update_data: function () {\r\n      this.axios\r\n        .post(this.url + \"/update_data_user\", {\r\n          nama: this.form.nama,\r\n          pekerjaan: this.form.pekerjaan,\r\n          tgl_lahir: this.form.tgl_lahir,\r\n          id_user: this.form.id_user,\r\n        })\r\n        .then((respon) => {\r\n          if (respon.data.pesan === \"success\") {\r\n            this.alert(\r\n              respon.data.variant,\r\n              respon.data.title,\r\n              respon.data.body\r\n            );\r\n            this.show_page();\r\n          } else {\r\n            this.alert_database();\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.alert_koneksi();\r\n        });\r\n    },\r\n\r\n    save_data: function () {\r\n      this.axios\r\n        .post(this.url + \"/save_data_user\", {\r\n          nama: this.form.nama,\r\n          pekerjaan: this.form.pekerjaan,\r\n          tgl_lahir: this.form.tgl_lahir,\r\n        })\r\n        .then((respon) => {\r\n          if (respon.data.pesan === \"success\") {\r\n            this.alert(\r\n              respon.data.variant,\r\n              respon.data.title,\r\n              respon.data.body\r\n            );\r\n            this.show_page();\r\n          } else {\r\n            this.alert_database();\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.alert_koneksi();\r\n        });\r\n    },\r\n\r\n    cek_validation: function () {\r\n      this.form.nama !== \"\"\r\n        ? (this.validation.nama = true)\r\n        : (this.validation.nama = false);\r\n      this.form.pekerjaan !== \"\"\r\n        ? (this.validation.pekerjaan = true)\r\n        : (this.validation.pekerjaan = false);\r\n      this.form.tgl_lahir !== \"\"\r\n        ? (this.validation.tgl_lahir = true)\r\n        : (this.validation.tgl_lahir = false);\r\n\r\n      this.form.nama !== \"\" &&\r\n      this.form.pekerjaan !== \"\" &&\r\n      this.form.tgl_lahir !== \"\"\r\n        ? (this.submit_disabled = false)\r\n        : (this.submit_disabled = true);\r\n    },\r\n\r\n    alert_koneksi: function () {\r\n      Swal.fire({\r\n        icon: \"error Connection\",\r\n        title: \"Oops...\",\r\n        text: \"Check Your Connection..!\",\r\n      });\r\n    },\r\n\r\n    alert_database: function () {\r\n      Swal.fire({\r\n        icon: \"error Client\",\r\n        title: \"Oops...\",\r\n        text: \"Error In Client..!\",\r\n      });\r\n    },\r\n\r\n    alert: function (variant, title, body) {\r\n      this.$bvToast.toast(body, {\r\n        title: title,\r\n        toaster: \"b-toaster-top-center\",\r\n        variant: variant,\r\n        solid: true,\r\n      });\r\n    },\r\n\r\n    focus_input: function () {\r\n      this.$refs.nama.focus();\r\n    },\r\n\r\n    reset_form: function () {\r\n      this.form.nama = \"\";\r\n      this.form.pekerjaan = \"\";\r\n      this.form.tgl_lahir = \"\";\r\n      this.form.id_user = \"\";\r\n      this.form.user_key = \"Automatic\";\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\nbutton {\r\n  color: white;\r\n}\r\n</style>"]}]}